const load=()=>{const t={initialized:!1,visible:!1,init:function(){this.initialized=!0,this.button=document.getElementById("js-admin-button"),this.form=document.getElementById("js-admin-form"),this.catName=document.querySelector("input#cat-name"),this.catUrl=document.querySelector("input#cat-url"),this.catClicks=document.querySelector("input#cat-clicks"),this.clearButton=document.querySelector("button#js-admin-reset"),this.button.classList.toggle("hidden"),this.button.onclick=(()=>{this.isVisible()?this.hide():(this.renderAdminFields(),this.show())}),this.form.onsubmit=(t=>{t.preventDefault();const e={name:this.catName.value,picUrl:this.catUrl.value,clicks:this.catClicks.value};a.updateCat(e),this.hide()}),this.clearButton.onclick=(()=>{this.button.click()})},renderAdminFields:function(){const t=a.getCurrentCat();this.catName.value=t.name,this.catUrl.value=t.img.src,this.catClicks.value=t.clicks},updateAdminClicks:function(t){this.isVisible()&&(this.catClicks.value=t)},isInitialized:function(){return this.initialized},isVisible:function(){return this.visible},hide:function(){this.visible=!1,this.form.classList.add("hidden")},show:function(){this.visible=!0,this.form.classList.remove("hidden")}},e={init:function(){this.button=document.getElementById("js-make-cat-button"),this.input=document.getElementById("js-name-input"),this.list=document.querySelector("ul.cat-list"),this.button.onclick=(t=>{if(""===this.input.value)t.stopPropagation();else{const e=a.makeCat(this.input.value);if(e.error)return t.stopPropagation(),void console.log(e.error);const i=document.createElement("li"),n=document.createElement("a");n.href=`javascript:console.log('${e.name}')`,n.setAttribute("id","js-get-cat-"+e.id),n.innerText=e.name,i.appendChild(n),this.list.appendChild(i),a.requestHideAdmin()}}),this.list.onclick=(t=>{if("A"!==t.target.nodeName)t.stopPropagation();else{const e=t.target.getAttribute("id"),i=Number.parseInt(e.charAt(e.length-1));a.listClicked(i)}}),document.onkeyup=(t=>{if("Enter"===t.key)switch(document.activeElement.nodeName){case"INPUT":this.button.click()}})}},i={init:function(){this.title=document.querySelector("section#js-cat-container h2"),this.wrapper=document.querySelector("div#js-pic-wrapper"),this.caption=document.querySelector("section#js-cat-container figure figcaption")},render:function(t){const e=t.id,i=this.wrapper.firstElementChild;null!==i&&this.wrapper.removeChild(i),this.title.innerText=t.name,t.img.setAttribute("id",e+"-pic"),this.wrapper.appendChild(t.img),this.wrapper.onclick=(()=>{a.incCounter()}),this.wrapper.classList.contains("hidden")&&this.wrapper.classList.toggle("hidden"),t.clicks>0?this.caption.innerText=`You've clicked ${t.name} `+(1===t.clicks?"1 time!":t.clicks.toString()+" times!"):this.caption.innerText=`You've clicked ${t.name} 0 times!`},updateClickView:function(t){this.caption.innerText=`You've clicked ${t.name} `+(1===t.clicks?"1 time!":t.clicks.toString()+" times!")}},n={currentCat:void 0,cats:[],getCurrentCat:function(){return this.currentCat},setCurrentCat:function(t){this.currentCat=t},updateCat:function(t){const e=this.getCurrentCat();e.img.src=t.picUrl,e.clicks=t.clicks,e.name=t.name,this.cats[t.id]=e,this.setCurrentCat(e)}},a={list:document.querySelector("ul.cat-list"),init:function(){s.init(),e.init(),i.init(),setTimeout(()=>{!function t(e,i,n,a=0){const s=e.split(""),c=s.length,r=document.querySelector(i),l=r.value.length;l<c?(r.value+=s[a],a++,setTimeout(()=>{t(e,i,n,a)},150)):"function"==typeof n&&n()}("Timothy","#js-name-input",function(){document.querySelector("#js-make-cat-button").click(),document.querySelector("#js-name-input").value=""})},500)},incCounter:function(){const e=n.getCurrentCat();e.clicks++,i.updateClickView(e),t.updateAdminClicks(e.clicks)},makeCat:function(e){t.isVisible()&&t.hide();const a=s.getImg();if(a.error)return console.log(a.error),a;const r=new c(e,n.cats.length,a);return n.cats.push(r),n.setCurrentCat(r),i.render(r),t.isInitialized()||t.init(),r},listClicked:function(t){n.setCurrentCat(n.cats[t]),this.requestHideAdmin(),i.render(n.getCurrentCat())},getCurrentCat:function(){return n.getCurrentCat()},updateCat:function(t){const e=this.getCurrentCat();t.id=e.id,n.updateCat(t),i.render(this.getCurrentCat())},requestHideAdmin:function(){t.isVisible()&&t.hide()}},s={availableImgs:[],availableImgUrls:["http://thecatapi.com/api/images/get?image_id=a2&format=src&type=png&size=small","http://thecatapi.com/api/images/get?image_id=a3&format=src&type=png&size=small","http://thecatapi.com/api/images/get?image_id=a4&format=src&type=png&size=small","http://thecatapi.com/api/images/get?image_id=a5&format=src&type=png&size=small","http://thecatapi.com/api/images/get?image_id=a6&format=src&type=png&size=small","http://thecatapi.com/api/images/get?image_id=a7&format=src&type=png&size=small","http://thecatapi.com/api/images/get?format=src&type=png&size=small"],init:function(){this.createImgTag(),this.createImgTag()},checkAvailableImgs:function(){return this.availableImgs.length},addAvailableImage:function(t){this.availableImgs.push(t)},getImg:function(){return this.checkAvailableImgs()>0&&this.checkAvailableImgUrls()>1?(this.createImgTag(),this.availableImgs.shift()):this.checkAvailableImgs()>0?this.availableImgs.shift():this.checkAvailableImgUrls()>0?(this.createImgTag(),this.availableImgs.shift()):{error:"There are no images available!"}},checkAvailableImgUrls:function(){return this.availableImgUrls.length},getSingleAvailableUrl:function(){return this.availableImgUrls.shift()},createImgTag:function(){const t=document.createElement("img");t.src=this.getSingleAvailableUrl(),this.addAvailableImage(t)}};a.init();class c{constructor(t,e,i){this.clicks=0,this.name=t,this.id=e,this.img=i}}};document.addEventListener("DOMContentLoaded",load);